/* MOBILE FIXES - Targeted improvements to existing design */

/* Ensure proper mobile layout for main content */
@media screen and (max-width: 768px) {
    /* Fix body padding for nav - AGGRESSIVE padding to clear fixed header */
    body,
    body.paper,
    main.container .paper {
        padding-top: 200px !important;
    }

    /* Ensure proper container width */
    .paper {
        max-width: 100%;
        padding-left: 15px;
        padding-right: 15px;
    }

    /* Fix stats grid on very small screens */
    .stats {
        grid-template-columns: 1fr 1fr !important;
        gap: 10px;
    }

    /* Better code block handling */
    pre {
        font-size: 9pt;
        padding: 10px;
        margin-left: -15px;
        margin-right: -15px;
        border-left: none;
        border-right: none;
    }

    /* Better table handling */
    table {
        display: block;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        font-size: 9pt;
    }

    /* Mobile navigation improvements */
    .nav-wrapper {
        max-height: 70vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }

    /* Touch target improvements - minimum 44px per Apple/Google guidelines */
    .internal-nav a,
    .external-nav a {
        min-height: 44px;
        display: flex;
        align-items: center;
        padding: 12px 15px;
    }

    /* All links in content should be touch-friendly */
    .paper-content a,
    .section a {
        display: inline-block;
        padding: 4px 0;
    }

    /* Better spacing for mobile content */
    h1 {
        font-size: 18pt;
        margin: 25px 0 15px 0;
    }

    h2 {
        font-size: 14pt;
        margin: 20px 0 12px 0;
    }

    /* Warning boxes mobile */
    .warning-box,
    .abstract {
        margin-left: -15px;
        margin-right: -15px;
        border-left: none;
        border-right: none;
    }

    /* Global button touch targets */
    button,
    .btn,
    input[type="submit"],
    input[type="button"] {
        min-height: 44px;
        padding: 12px 16px;
    }

    /* Form inputs touch-friendly */
    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="password"],
    textarea,
    select {
        min-height: 44px;
        font-size: 16px !important; /* Prevents iOS zoom */
        padding: 10px 12px;
    }

    /* Improve list item spacing for touch */
    ul li,
    ol li {
        padding: 4px 0;
    }

    /* Improve footer links */
    footer a {
        display: inline-block;
        padding: 8px 4px;
        min-height: 44px;
    }
}

/* Very small screens (< 480px) */
@media screen and (max-width: 480px) {
    .stats {
        grid-template-columns: 1fr !important;
    }

    .stat .value {
        font-size: 16pt;
    }

    h1 {
        font-size: 16pt;
    }

    /* Extra padding for very small screens */
    body {
        padding-left: 12px !important;
        padding-right: 12px !important;
    }

    /* Larger touch targets for very small screens */
    button,
    .btn,
    a.btn {
        min-height: 50px;
        font-size: 11pt;
    }

    /* Better spacing for lists */
    ul, ol {
        padding-left: 20px;
    }

    /* Compact headers */
    h1 { font-size: 15pt; }
    h2 { font-size: 13pt; }
    h3 { font-size: 11pt; }

    /* Full-width images */
    img {
        max-width: 100%;
        height: auto;
    }

    /* Improve code block readability */
    pre, code {
        font-size: 8pt;
        word-break: break-all;
    }
}

/* Landscape mobile */
@media screen and (max-height: 500px) and (orientation: landscape) {
    .nav-wrapper {
        max-height: 60vh;
    }
}

/* Fix navigation overflow on desktop */
@media screen and (min-width: 769px) {
    .nav-wrapper {
        overflow: visible;
    }
}

/* Ensure scrollbars are visible on overflow */
pre::-webkit-scrollbar,
table::-webkit-scrollbar,
.nav-wrapper::-webkit-scrollbar {
    height: 8px;
    width: 8px;
}

pre::-webkit-scrollbar-track,
table::-webkit-scrollbar-track,
.nav-wrapper::-webkit-scrollbar-track {
    background: #f0f0f0;
}

pre::-webkit-scrollbar-thumb,
table::-webkit-scrollbar-thumb,
.nav-wrapper::-webkit-scrollbar-thumb {
    background: #999;
}

pre::-webkit-scrollbar-thumb:hover,
table::-webkit-scrollbar-thumb:hover,
.nav-wrapper::-webkit-scrollbar-thumb:hover {
    background: #666;
}

/* Safe area insets for notched devices (iPhone X+, etc.) */
@supports (padding: env(safe-area-inset-top)) {
    body {
        padding-left: max(15px, env(safe-area-inset-left));
        padding-right: max(15px, env(safe-area-inset-right));
        padding-bottom: max(40px, env(safe-area-inset-bottom));
    }

    .academic-nav {
        padding-top: env(safe-area-inset-top);
    }

    footer {
        padding-bottom: max(20px, env(safe-area-inset-bottom));
    }
}

/* Prevent text selection flash on mobile tap */
@media (hover: none) {
    a, button, .btn {
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    }
}

/* Improve scroll behavior on iOS */
html {
    -webkit-overflow-scrolling: touch;
}

/* Fix for iOS Safari address bar */
@media screen and (max-width: 768px) {
    body {
        min-height: 100vh;
        min-height: -webkit-fill-available;
    }

    html {
        height: -webkit-fill-available;
    }
}